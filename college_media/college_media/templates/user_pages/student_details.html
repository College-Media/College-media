{% extends "user_pages/base.html" %}
{% block style %}
{% load static %}
body {
display: flex;
align-items: flex-start;
justify-content: flex-start;
margin: 0;

}

.left {
position: fixed; /* Make the left sidebar fixed */
top: 0;
left: 0;
height: 100vh;
min-width: 120px;
border-right: 1px solid rgba(133, 130, 130, 0.474);
background-color: #fff; /* Optional background color */
z-index: 1; /* Ensure it stays on top */
}

.left .logo-image {
border-radius: 50%;
background-image: url('{% static "images/media-img.jfif" %}');
border: 1px solid rgba(144, 138, 138, 0.678);
min-width: 90px;
width: 90px;
height: 90px;
margin: 10px 2px;
background-size: cover;
background-position: center;
background-repeat: no-repeat;
}

.left ul:first-child {
margin-bottom: 20px;
}

.left ul {
list-style-type: none;
display: flex;
align-items: center;
flex-direction: column;
row-gap: 20px;
flex-grow: 1;
justify-content: flex-start;
padding: 30px;
}

.menu-items {
display: flex;
align-items: center;
column-gap: 8px;
padding: 8px;
width: 100%;
padding-left: 20px;
}

.menu-items:hover {
border-radius: 10px;
background-color: rgba(234, 232, 228, 0.807);
}

.menu-items:hover .icon {
fill: black;
width: 28px;
}

.left a,
.logo-name {
text-decoration: none;
font-family: Georgia, 'Times New Roman', Times, serif;
color: black;
font-size: 18px;
flex: 1;
}

.profile,
.mview-logo {
border-radius: 50%;
border: 3px solid rgba(85, 79, 79, 0.678);
width: 30px;
height: 30px;
background-size: cover;
background-position: center;
background-repeat: no-repeat;
}

.right {
margin-left: 120px; /* Offset by the width of the left sidebar */
height: 100vh;
display: flex;
flex-direction: column;
width: calc(100% - 120px); /* Fill remaining space */
overflow:hidden;
margin-top:0px;
margin-bottom:0px;
gap:4px;
}

.right-top {
margin-left: 237px;
background-color: rgb(248, 248, 248);
width: 100%;
height: 30%;
align-items: center;
display: flex;
flex-direction: row;
border-bottom: 1px solid rgb(160, 158, 158);
overflow:hidden;

}

.right-profile {
margin: auto;
display: flex;
flex-direction: row;
column-gap: 10px;

}

.right-profile ul {
padding: 0;
font-weight:bold;
display: flex;
align-items: start;
flex-direction: column;
text-decoration: none;
list-style-type: none;
margin:0;
}

.right-profile li:first-child {
font-size: large;
}
#added-tags{
color: rgb(42, 174, 188);
text-decoration:underline;
font-style:italic;
}
#add-tag-btn{
color: rgb(42, 174, 188);
}
#add-tag-btn:hover{
text-decoration:underline;
cursor:pointer;
}
.profile-image{
width: 100%;
height: 100%;
border-radius: 50%;
background-size: cover;
background-position: center;
background-repeat: no-repeat;
}

#profile-image-edit {
cursor: pointer;
border-radius: 50%;
border: 1px solid rgba(144, 138, 138, 0.678);
width: 90px;
height: 90px;
margin: 10px 2px;
background-size: cover;
background-position: center;
background-repeat: no-repeat;
}

.edit {
padding: 10px;
align-items: center;
margin-left: auto;
position: relative;
display: inline-block;
}

.editBtn {

border-radius: 10px;
background-color: rgba(10, 10, 156, 0.718);
padding: 10px;
color: rgb(251, 250, 252);
font-size: medium;
font-weight: bold;
font-family: Arial, Helvetica, sans-serif;
}
#editBtn1{
display:none;
margin-top:20px;
border:none;
border-radius: 10px;
background-color: rgba(8, 8, 107, 0.749);
padding: 10px;
color: rgb(251, 250, 252);
font-size: small;
font-weight: bold;
font-family: Arial, Helvetica, sans-serif;
}



.post-in-profile {
cursor: pointer;
}

h2 {
margin-top: 0;
}
/*
form {
display: flex;
flex-direction: column;
justify-content: flex-start;
align-items: center;
row-gap: 10px;
position: fixed;
width: 100%;
}

form label {
margin-right: auto;
margin-left: 20%;
margin-top: 10px;
}
input[type="text"] {
/*margin:0 auto 10px 10px;*/
padding: 10px;
width: 60%;
border: 1px solid #ddd;
border-radius: 4px;
} */

#overlay {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.5);
z-index: 1000;
}

/*#profile-pic-overlay {
display: none;
min-width: 90px;
position: fixed;
height: 90px;
width:90px;
background-color: rgba(0, 0, 0, 0.5);
z-index: 1000;
border-radius: 50%;
}*/

<!-- #overlay2 {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: rgba(211, 208, 208, 0.5);
z-index: 1002;
} -->

#editProfileForm {
display: none;
position: fixed;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
z-index: 1001;
max-width: 600px;
height: 500px;

border: 1px solid #ddd;
background-color: #fff;
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
width: 350px;
text-align: center;
border-radius: 8px;
}

.closeBtn {
position: absolute;
top: 5px;
right: 10px;
font-size: 30px;
border: none;
background: none;
cursor: pointer;
}

#subBtn {
display: block;
margin: 0px;
padding: 10px 30px;
background-color: rgb(218, 236, 236);
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
border-radius: 20px;
border: 1px solid rgb(174, 173, 173);
font-size: medium;
font-weight: bold;
}

#profile-edit-pic-table {
display: none;
width: 100%;
cursor: pointer;
position: fixed;
border-top-left-radius: 10px;
border-top-right-radius: 10px;
background-color: white;
bottom: 0;
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
z-index: 1003;
margin-left: 0;
transition: height 0.5s ease-out;
}

#profile-edit-pic-table ul {
padding: 0;
margin: 0;
list-style-type: none;
}

#profile-edit-pic-table li {
color: rgb(210, 20, 20);
padding: 15px;
text-align: center;
border-top: 1px solid rgb(147, 143, 143);
}

#profile-edit-pic-table li:first-child {
border-top: none;
color: black;
}

/*--------MOBILE VIEW--------*/
.mobile-top,
.mobile-bottom {
display: none;
}

@media (max-width:940px) {
.menu-items a {
display: none;
}

.logo-image {
width: 85px;
}
}
/* css changes for responsiveness */
@media (max-width:900px) {
.right-profile li:first-child {
font-size: small;
}
.right-profile {
padding-left: 15%;
}
.right-profile ul{
margin-top:5px;
}
.right-profile img {
width: 80px;
height: 80px;
}

.right-profile #profile-image-placeholder-large {
width: 80px;
height: 80px;
}
}

@media (max-width:600px) {
body {
display: flex;
flex-direction: column;
}

.left {
display: none;
}

.mview-logo {
background-image: url('{% static "images/media-img.jfif" %}');
}

.mobile-top {
display: flex;
margin: 0;
width: 100%;
}

.mobile-top ul {
list-style-type: none;
display: flex;
flex-direction: row;
align-items: flex-end;
justify-content: flex-end;
column-gap: 20px;
padding: 0;
width: 100%;
}

.mobile-top svg {
fill: black;
width: 24px;
height: 24px;
}
.mobile-bottom svg {
fill: black;
width: 35px;
height: 35px;
}

.mobile-top li:first-child {
margin-right: auto;
padding: 4px;
}
.editBtn{
display:none;
}
#editBtn1{
display:block;
}
.right-top ul{
margin:0;
}
.right-top ul:first-child {
width: 20px;
font-size:12px;
}
.right-top{

height:30%;
min-height:150px;
}
.right-profile{
margin-left:1px;
padding-left:10px;
}
.mobile-bottom {
margin: 100%;
display: flex;
justify-content: center;
position: absolute;
bottom: 0px;
z-index: 1;
background-color: white;
border-top: 1px solid rgb(176, 172, 172);
}

.mobile-bottom ul {
list-style-type: none;
display: flex;
flex-direction: row;
margin: 0;
column-gap: 10%;
max-width: 100%;
padding: 5px;
flex-wrap: nowrap;
flex: 100%;
overflow: hidden;
}

.mobile-bottom li {
flex-grow: 1;
}

.right {
max-height: calc(100vh - 100px);
display: flex;
flex-direction: column;
align-items: center;
width: 100%;
height: auto;

}

.right::-webkit-scrollbar {
display: none;
}

.right {
-ms-overflow-style: none;
scrollbar-width: none;
}

.right,
.post,
.mobile-top,
.mobile-bottom {
width: 100%;
margin: 0;
padding: 0;
}
}
/*CSS changes for main edit-profile in user page */
#profile-image-placeholder-large {
width: 100px;
height: 100px;
background-color: rgba(10, 136, 150, 0.997);
color: #fff;
display: flex;
align-items: center;
justify-content: center;
font-size: 24px;
border-radius: 50%;
font-weight: bold;
}

#profile-image-placeholder {
width: 30px;
height: 30px;
background-color: #ccc;
color: #fff;
display: flex;
align-items: center;
justify-content: center;
font-size: 14px;
border-radius: 50%;
border: 1px solid black;
font-weight: bold;
cursor: pointer;
}
.img1 {
width: 100%;
height: 100%;
border-radius: 50%;
}

{% comment %} css for image container {% endcomment %}

.chat-icon1{
color:white;
display:flex;
flex-direction:row;
column-gap:10px;
border-radius:10px;
margin:auto;
margin-left:100px;
padding:10px;
cursor:pointer;
font-size:16px;
background-color:rgba(10, 136, 150, 0.997);
}
.chat-icon1 svg{
fill: white;
}
.right-bottom {
margin-left:237px;
display: flex;
justify-content: start;
align-items: flex-start;
width: 100%;
flex-wrap:wrap;
height: 100%;
flex-direction:row;
gap:5px;
overflow-y:auto;
flex-grow:1;
}

.image-container {
width: 100%;
background-color: #cccacae6;
height: 100%;
border-radius: 0px;
box-shadow: 0 4px 8px rgba(61, 59, 59, 0.2);
transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.image-container img {
width: 100%;
height: 100%;
}

.post-in-stu{
display: flex;
background-color:rgb(247, 247, 247);
flex-direction: column;
gap: 3px;
flex-wrap: wrap;
width:340px;
max-width:340px;
max-height:450px;
height:450px;
margin-top: 0;
}

.disc{
padding:0px 10px;
width:100%;
font-size:12px;
margin-top:10px;
}

@media(max-width:1057px){
.right-profile{
padding-left:10%;
}
}
@media(max-width:990px)
{
.chat-icon1{
margin-left:0px;
}
}
@media(max-width:700px){
.right-profile{
padding-left:30px;
}
}
@media(max-width:600px){
.right-bottom{
margin:5px;
}
.post-in-stu{
width:200px;
height:300px;
flex-grow:1;
margin:10px;
}
.chat-icon1{
margin-left:0px;
position: absolute;
right: 10px;
top: 20px;
}
.right-profile{
position:relative;
}
.right-profile #profile-image-placeholder-large {
margin-top:-5px;
}
.profile-image{
margin-top:0px;
}
}
@media(max-width:450px){
.post-in-stu{
margin:auto;
}
}
@media(max-width:420px){
.right-profile{
width:100%;
padding:2px;
column-gap:5px;
}
.profile-image, #profile-image-placeholder-large{
max-width:60px;
max-height:60px;
}
.right-profile ul{
font-size:14px;
}
.chat-icon1{
right:52px;
top:20px;
padding:6px;
}

}

@media(max-height:660px){
.left ul {
padding-top:10px;
row-gap:10px;
}
}

.form-container {
background: #fff;
border-radius: 10px;
box-shadow:inset -3px -3px 20px rgba(42, 174, 188, 0.4);
display: flex;
flex-direction: column;
align-items: center;
gap:10px;
justify-content:center;
margin:30px 15px;
padding:10px;
}

.tag-class{
background: #fff; /* No gradient, pure white background */
position: fixed;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
z-index: 1001;
max-width: 600px;
height: 500px;
font-size: medium;
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background-color: #fff;
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
width: 350px;
text-align: center;
border-radius: 8px;
border:1px solid rgba(42, 174, 188, 0.4);
{% comment %} display:none; {% endcomment %}
}
.form-container form{
position:relative;
}
.form-container button {
background: rgb(42, 174, 188);
padding:10px;
color: #fff;
font-size: 16px;
font-weight: 600;
border: none;
border-radius: 5px;
cursor: pointer;
transition: background 0.3s ease;
}

.form-container button:hover {
background: #2575fc;
}

.form-container .footer {
margin-top: 20px;
font-size: 12px;
color: #555;
}

.form-container .footer a {
color: rgb(42, 174, 188);
text-decoration: none;
font-weight: 600;
}

.form-container .footer a:hover {
text-decoration: underline;
}
.input-group{
display:flex;
flex-direction:column;
align-items:start;
}
.input-group input{
  padding:15px;
  margin-bottom:35px;
 }
#img-in-tags{
width:100px;
padding:20px;
heigh:100px;
margin:10px;
border-radius:50%;
border:2px solid rgba(42, 174, 188,0.5);
}
#img-in-tags img{
width: 100%;
height: 100%;
border-radius: 50%;
background-size: cover;
background-position: center;
background-repeat: no-repeat;
}
.message {
margin: 10px;
position: absolute;
top: 0;
right: 0;
flex-grow: 1;
padding: 0 10px;
justify-content: center;
display: flex;
flex-direction: row;
align-items: center;
column-gap: 10px;
height: 50px;
color: rgb(252, 252, 252);
font-weight: bold;
max-width: 300px;
background-color: rgb(16, 108, 33);
border-radius: 10px;
}

.message-red {
margin: 10px;
position: absolute;
top: 0;
right: 0;
flex-grow: 1;
padding: 0px 90px 0px 10px;
justify-content: center;
display: flex;
flex-direction: row;
align-items: center;
column-gap: 10px;
height: 50px;
color: rgb(252, 252, 252);
font-weight: bold;
max-width: 300px;
background-color: rgb(251, 39, 46);
border-radius: 10px;
}

.message-red svg, .message svg{
fill:white;
}
.post-in-stu-profile{
  margin-right:50px;
  display: flex;
justify-content: start;
align-items: flex-start;
width: 100%;
flex-wrap:wrap;
height: 100%;
flex-direction:row;
gap:5px;
overflow-y:auto;
flex-grow:1;
}
{% endblock style %}

{% block content %}

{% if messages %}
{% for message in messages %}
{% if 'tag_exists' in message.tags %}
<div class="message-red">
  <!-- <div class="message-icon"> -->
  <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px" fill="#FFFFFF">
    <path
      d="m338-290 142-142 142 142 48-48-142-142 142-142-48-48-142 142-142-142-48 48 142 142-142 142 48 48ZM479.68-59q-86.32 0-163.65-32.6-77.32-32.61-134.57-89.86T91.6-316.03Q59-393.35 59-479.86q0-87.41 32.66-164.28Q124.33-721 181.7-778.58q57.38-57.57 134.41-90.49Q393.15-902 479.34-902q87.55 0 164.83 32.85 77.29 32.85 134.57 90.3 57.29 57.46 90.27 134.52Q902-567.26 902-479.46q0 86.74-32.93 163.55-32.92 76.81-90.49 134.2Q721-124.33 644.13-91.66 567.26-59 479.68-59Z" />
  </svg>
  <!-- </div> -->
  <div class="message-text">{{message}}</div>
</div>
{% elif 'tag_added' in message.tags %}
<div class="message">
  <!-- <div class="message-icon"> -->
  <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px" fill="white">
    <path
      d="m419-285 291-292-63-64-228 228-111-111-63 64 174 175Zm60.68 226q-86.32 0-163.65-32.6-77.32-32.61-134.57-89.86T91.6-316.03Q59-393.35 59-479.86q0-87.41 32.66-164.28Q124.33-721 181.7-778.58q57.38-57.57 134.41-90.49Q393.15-902 479.34-902q87.55 0 164.83 32.85 77.29 32.85 134.57 90.3 57.29 57.46 90.27 134.52Q902-567.26 902-479.46q0 86.74-32.93 163.55-32.92 76.81-90.49 134.2Q721-124.33 644.13-91.66 567.26-59 479.68-59Z" />
  </svg>
  <!-- </div> -->
  <div class="message-text">{{message}}</div>
</div>
{% endif %}
{% endfor %}
{% endif %}
<!-- <div id="overlay"></div> -->
<div class="right">
  <div class="right-top">
    <div class="right-profile">

      {% if student_info.profile_image %}
      <div id="profile-image-placeholder-large"><img class="profile-image" src="{{ student_info.profile_image.url }}">
        </img></div>
      {% else %}
      <div id="profile-image-placeholder-large">
        {{ student_info.name|slice:":2"|upper }} <!-- First two letters of the student's name -->
      </div>

      {% endif %}
      <ul>

        <li><label>{{ student_info.email}}</label></li>
        <li><label>{{ student_info.name}}</label></li>
        <li><label>{{ student_info.roll_number}}</label></li>
        <li>
          <div id="added-tags">&dhosth</div>
        </li>
        <li>
          <div id="add-tag-btn">Add Tag</div>
        </li>

      </ul>
      <div class="chat-icon1" onclick="window.location='{% url 'chat' student_info.roll_number %}'">

        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368">
          <path
            d="M240-400h320v-80H240v80Zm0-120h480v-80H240v80Zm0-120h480v-80H240v80ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z" />
        </svg>
        <div>chat</div>
      </div>
      <div>

      </div>
    </div>

  </div>
  <div class="tag-class" id="tag-add-table">
    <h3>Tag a Person</h3>
    <div class="form-container">


      <div id="img-in-tags">
        <img src="{% static 'images/turtle.png' %}" alt="Turtoise Image">
      </div>

      <form action="/tag_submit" method="POST">
        {% csrf_token %}

        <div class="input-group">
          <label for="tag">Enter Tag:</label>
          <input type="text" id="tag" name="tag" placeholder="E.g., Awesome Leader" required>
          <button type="submit" name="tag_receiver" value={{student_info.roll_number}}>Add Tag</button>
        </div>
      </form>
      <div class="footer">
        <p>Want to view tags? <a href="/tags-list">Click here</a></p>
      </div>
    </div>
  </div>
  <div class="right-bottom">
    <div class="post-in-stu-profile">
      {% for post in posts %}
      {% if post %}
      {% if post.is_approved %}
      <div class="post-in-stu">
        <div class="image-container">
          <img src="{{ post.image.url }}" alt="Posts">
        </div>
        <!-- {% if post.content %}
        <div class="disc">{{post.content}}</div>
        {% endif %} -->
      </div>
      {% endif %}
      {% else %}
    </div>
    <center>
      <div>No Post</div>
    </center>



    {% endif %}


    {% endfor %}
  </div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const tag = document.getElementById('tag-add-table');
    const over = document.getElementById('overlay');
    const addTag = document.getElementById('add-tag-btn');
    addTag.addEventListener('click', function () {
      tag.style.display = 'block';
      over.style.display = 'block';
    });
    over.addEventListener('click', function () {
      tag.style.display = 'none';
      over.style.display = 'none';
    })
  });
</script>
{% endblock content %}
